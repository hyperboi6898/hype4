<!DOCTYPE html>
<html lang="vi">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6CP5DVM08Z"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6CP5DVM08Z');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ªëng k√™ Hyperliquid - Ph√≠ giao d·ªãch v√† gi√° token</title>
    <meta name="description" content="Theo d√µi ph√≠ giao d·ªãch h√†ng ng√†y v√† gi√° token c·ªßa Hyperliquid - C·∫≠p nh·∫≠t theo th·ªùi gian th·ª±c">
    <meta property="og:title" content="Th·ªëng k√™ Hyperliquid - Ph√≠ giao d·ªãch v√† gi√° token">
    <meta property="og:description" content="Theo d√µi ph√≠ giao d·ªãch h√†ng ng√†y v√† gi√° token c·ªßa Hyperliquid - C·∫≠p nh·∫≠t theo th·ªùi gian th·ª±c">
    <meta property="og:image" content="blog/images/image.webp">
    <meta property="og:url" content="https://hyperliquid-vietnam.com/stats.html">
    
    <!-- SEO Meta Tags -->
    <meta name="keywords" content="Hyperliquid, HYPE, crypto stats, trading volume, TVL, perpetual exchange, DeFi stats, crypto metrics, decentralized exchange">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Th·ªëng k√™ Hyperliquid - Ph√≠ giao d·ªãch v√† gi√° token">
    <meta name="twitter:description" content="Theo d√µi ph√≠ giao d·ªãch h√†ng ng√†y v√† gi√° token c·ªßa Hyperliquid - C·∫≠p nh·∫≠t theo th·ªùi gian th·ª±c">
    <meta name="twitter:image" content="blog/images/image.webp">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://hyperliquid-vietnam.com/stats.html">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/styles-part2.css">
    <link rel="stylesheet" href="css/styles-part3.css">
    <link rel="stylesheet" href="css/styles-part4.css">
    <link rel="stylesheet" href="css/styles-part5.css">
    <link rel="stylesheet" href="css/styles-part6.css">
    <link rel="stylesheet" href="css/stats.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body data-theme="dark">
    <!-- Price Ticker -->
    <div class="price-ticker">
        <div class="ticker-content">
            <div class="price-item">
                <span>üíé HYPE:</span>
                <span id="hype-price">$36.92</span>
                <span id="hype-change" class="price-change positive">+2.23%</span>
            </div>
            <div class="price-item">
                <span>üìä 24h Volume:</span>
                <span>$438.7M</span>
            </div>
            <div class="price-item">
                <span>üî• TVL:</span>
                <span>$12.8B</span>
            </div>
            <div class="price-item">
                <span>‚ö° TPS:</span>
                <span>200,000</span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">
                Hyperliquid Vietnam
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Trang ch·ªß</a></li>
                <li><a href="index.html#features">T√≠nh nƒÉng</a></li>
                <li><a href="index.html#faq">FAQ</a></li>
                <li><a href="stats.html" class="active">Th·ªëng k√™</a></li>
                <li><a href="blog/index.html">Blog</a></li>
                <li><a href="https://app.hyperliquid.xyz/join/VN84" target="_blank" rel="noopener" style="color:#00eaff;font-weight:bold;">B·∫Øt ƒë·∫ßu giao d·ªãch</a></li>
            </ul>
            <div class="nav-controls">
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
                <button class="lang-toggle" onclick="toggleLanguage()">üáªüá≥</button>
                <div class="menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Stats Hero Section -->
    <section class="stats-hero">
        <div class="container">
            <div class="section-title fade-in">
                <h1>Th·ªëng k√™ Hyperliquid</h1>
                <p>Theo d√µi ph√≠ giao d·ªãch v√† gi√° token theo th·ªùi gian th·ª±c</p>
            </div>
        </div>
    </section>

    <!-- Stats Dashboard -->
    <section class="stats-dashboard">
        <div class="container">
            <!-- Price Chart Section -->
            <div class="price-section-title fade-in">
                <h2>Bi·ªÉu ƒë·ªì gi√° HYPE</h2>
            </div>
            
            <!-- DexScreener Embed (Full Width) -->
            <div class="dexscreener-container fade-in">
                <style>
                    .dexscreener-container {
                        margin-top: 2rem;
                        margin-bottom: 3rem;
                        background: var(--background-card);
                        border-radius: 16px;
                        border: 1px solid var(--border-color);
                        overflow: hidden;
                        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                    }
                    #dexscreener-embed {
                        position: relative;
                        width: 100%;
                        padding-bottom: 80%;
                    }
                    @media(min-width:1400px) {
                        #dexscreener-embed {
                            padding-bottom: 50%;
                        }
                    }
                    #dexscreener-embed iframe {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        top: 0;
                        left: 0;
                        border: 0;
                    }
                </style>
                <div id="dexscreener-embed">
                    <iframe src="https://dexscreener.com/hyperliquid/0x13ba5fea7078ab3798fbce53b4d0721c?embed=1&loadChartSettings=0&chartLeftToolbar=0&chartTheme=dark&theme=dark&chartStyle=0&chartType=usd&interval=15"></iframe>
                </div>
            </div>

            <!-- Stats Overview -->
            <div class="stats-overview fade-in">
                <div class="stats-overview-grid">
                    <!-- Fee Stats Card -->
                    <div class="stats-card">
                        <div class="stats-card-header">
                            <h2>Ph√≠ giao d·ªãch h√†ng ng√†y</h2>
                            <div class="stats-card-actions">
                                <button class="btn-refresh" onclick="fetchFeeData()">üîÑ</button>
                                <button class="btn-timeframe active" data-timeframe="7d">7 ng√†y</button>
                                <button class="btn-timeframe" data-timeframe="30d">30 ng√†y</button>
                                <button class="btn-timeframe" data-timeframe="90d">90 ng√†y</button>
                            </div>
                        </div>
                        <div class="stats-card-body">
                            <div class="stats-highlight">
                                <div class="stats-value">
                                    <span id="today-fee">$3,017,044</span>
                                    <div class="stats-change" id="fee-change">
                                        <span class="change-value negative">-3.73%</span>
                                        <span class="change-label">so v·ªõi h√¥m qua</span>
                                    </div>
                                </div>
                                <div class="stats-label">Ph√≠ giao d·ªãch h√¥m nay</div>
                            </div>
                            <div class="stats-chart-container">
                                <canvas id="fee-chart"></canvas>
                            </div>
                        </div>
                        <div class="stats-card-footer">
                            <div class="stats-summary">
                                <div class="stats-summary-item">
                                    <span class="summary-label">7 ng√†y</span>
                                    <span class="summary-value" id="fee-7d">$18,062,999</span>
                                </div>
                                <div class="stats-summary-item">
                                    <span class="summary-label">T·ªïng ph√≠</span>
                                    <span class="summary-value" id="fee-total">$383,922,252</span>
                                </div>
                            </div>
                            <div class="stats-source">Ngu·ªìn: DeFi Llama API</div>
                        </div>
                    </div>

                    <!-- TVL Stats Card -->
                    <div class="stats-card">
                        <div class="stats-card-header">
                            <h2>T·ªïng gi√° tr·ªã kh√≥a (TVL)</h2>
                            <div class="stats-card-actions">
                                <button class="btn-refresh" onclick="fetchTVLData()">üîÑ</button>
                            </div>
                        </div>
                        <div class="stats-card-body">
                            <div class="stats-highlight">
                                <div class="stats-value">
                                    <span id="current-tvl">$1,758,094,425</span>
                                    <div class="stats-change" id="tvl-change">
                                        <span class="change-value positive">+2.15%</span>
                                        <span class="change-label">7 ng√†y qua</span>
                                    </div>
                                </div>
                                <div class="stats-label">TVL hi·ªán t·∫°i</div>
                            </div>
                            <div class="tvl-breakdown">
                                <h3>Stablecoins tr√™n Hyperliquid L1</h3>
                                <div class="stablecoin-list">
                                    <div class="stablecoin-item">
                                        <div class="stablecoin-name">USDC</div>
                                        <div class="stablecoin-value">$1,775,483,252</div>
                                    </div>
                                    <div class="stablecoin-item">
                                        <div class="stablecoin-name">USDT</div>
                                        <div class="stablecoin-value">$13,728,464</div>
                                    </div>
                                    <div class="stablecoin-item">
                                        <div class="stablecoin-name">FEUSD</div>
                                        <div class="stablecoin-value">$26,850,734</div>
                                    </div>
                                    <div class="stablecoin-item">
                                        <div class="stablecoin-name">USDe</div>
                                        <div class="stablecoin-value">$7,282,764</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="stats-card-footer">
                            <div class="stats-source">Ngu·ªìn: DeFi Llama API</div>
                        </div>
                    </div>
                </div>

                <!-- Volume Stats Card (Full Width) -->
                <div class="stats-card volume-card">
                    <div class="stats-card-header">
                        <h2>Kh·ªëi l∆∞·ª£ng giao d·ªãch Perp</h2>
                        <div class="stats-card-actions">
                            <button class="btn-refresh" onclick="fetchVolumeData()">üîÑ</button>
                        </div>
                    </div>
                    <div class="stats-card-body">
                        <div class="stats-highlight">
                            <div class="stats-value">
                                <span id="current-volume">$11,086,221,730</span>
                                <div class="stats-change" id="volume-change">
                                    <span class="change-value positive">+2.72%</span>
                                    <span class="change-label">so v·ªõi h√¥m qua</span>
                                </div>
                            </div>
                            <div class="stats-label">Kh·ªëi l∆∞·ª£ng giao d·ªãch h√¥m nay</div>
                        </div>
                    </div>
                    <div class="stats-card-footer">
                        <div class="stats-summary">
                            <div class="stats-summary-item">
                                <span class="summary-label">7 ng√†y</span>
                                <span class="summary-value" id="weekly-volume">$65,560,958,107</span>
                            </div>
                            <div class="stats-summary-item">
                                <span class="summary-label">T·ªïng kh·ªëi l∆∞·ª£ng</span>
                                <span class="summary-value" id="total-volume">$1,610,642,751,323</span>
                            </div>
                            <div class="stats-summary-item">
                                <span class="summary-label">Th·ªã ph·∫ßn</span>
                                <span class="summary-value" id="market-share">15.8%</span>
                            </div>
                        </div>
                        <div class="stats-source">Ngu·ªìn: DeFi Llama API</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Volume and Open Interest Comparison Charts Section -->
    <section class="comparison-charts-section">
        <div class="container">
            <div class="section-title fade-in">
                <h2>So s√°nh v·ªõi c√°c s√†n kh√°c</h2>
            </div>
            <div class="stats-overview fade-in">
                <!-- Volume Comparison Chart -->
                <div class="stats-card volume-comparison-card">
                    <div class="stats-card-header">
                        <h2>So s√°nh kh·ªëi l∆∞·ª£ng giao d·ªãch</h2>
                    </div>
                    <div class="stats-card-body">
                        <div class="stats-chart-container">
                            <canvas id="volumeComparisonChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Open Interest Comparison Chart -->
                <div class="stats-card open-interest-comparison-card">
                    <div class="stats-card-header">
                        <h2>So s√°nh Open Interest</h2>
                    </div>
                    <div class="stats-card-body">
                        <div class="stats-chart-container">
                            <canvas id="openInterestComparisonChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Keyword Rich Content Section -->
    <section class="content-section">
        <div class="container">
            <div class="content-wrapper fade-in">
                <h2>Th·ªëng k√™ Hyperliquid - Theo d√µi d·ªØ li·ªáu th·ªã tr∆∞·ªùng theo th·ªùi gian th·ª±c</h2>
                <div class="content-grid">
                    <div class="content-item">
                        <h3>Bi·ªÉu ƒë·ªì gi√° Hyperliquid</h3>
                        <p>Theo d√µi bi·ªÉu ƒë·ªì gi√° HYPE theo th·ªùi gian th·ª±c v·ªõi c√°c c√¥ng c·ª• ph√¢n t√≠ch k·ªπ thu·∫≠t. Bi·ªÉu ƒë·ªì Hyperliquid c·∫≠p nh·∫≠t li√™n t·ª•c gi√∫p b·∫°n n·∫Øm b·∫Øt m·ªçi bi·∫øn ƒë·ªông c·ªßa th·ªã tr∆∞·ªùng.</p>
                    </div>
                    <div class="content-item">
                        <h3>TVL Hyperliquid</h3>
                        <p>T·ªïng gi√° tr·ªã kh√≥a (TVL) tr√™n Hyperliquid L1 ƒë·∫°t h∆°n $1.7 t·ª∑ v·ªõi c√°c stablecoin ch√≠nh bao g·ªìm USDC, USDT, FEUSD v√† USDe. Theo d√µi TVL Hyperliquid ƒë·ªÉ ƒë√°nh gi√° s·ª± tƒÉng tr∆∞·ªüng c·ªßa h·ªá sinh th√°i.</p>
                    </div>
                    <div class="content-item">
                        <h3>Ph√≠ giao d·ªãch v√† Buy Back</h3>
                        <p>97% ph√≠ giao d·ªãch tr√™n Hyperliquid ƒë∆∞·ª£c d√πng ƒë·ªÉ buy back token HYPE, t·∫°o √°p l·ª±c mua li√™n t·ª•c tr√™n th·ªã tr∆∞·ªùng. Theo d√µi doanh thu ph√≠ giao d·ªãch h√†ng ng√†y ƒë·ªÉ d·ª± ƒëo√°n t√°c ƒë·ªông ƒë·∫øn gi√° token.</p>
                    </div>
                    <div class="content-item">
                        <h3>Kh·ªëi l∆∞·ª£ng giao d·ªãch Hyperliquid</h3>
                        <p>S√†n Hyperliquid ƒë·∫°t kh·ªëi l∆∞·ª£ng giao d·ªãch h∆°n $11 t·ª∑ m·ªói ng√†y, v∆∞∆°n l√™n v·ªã tr√≠ h√†ng ƒë·∫ßu trong c√°c s√†n giao d·ªãch phi t·∫≠p trung. Th·ªëng k√™ volume giao d·ªãch c·ªßa Hyperliquid cho th·∫•y s·ª± tƒÉng tr∆∞·ªüng ·ªïn ƒë·ªãnh.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content fade-in">
                <h2>B·∫Øt ƒë·∫ßu giao d·ªãch tr√™n Hyperliquid ngay h√¥m nay</h2>
                <p>Tr·∫£i nghi·ªám giao d·ªãch Perp v·ªõi ph√≠ th·∫•p, t·ªëc ƒë·ªô nhanh v√† thanh kho·∫£n cao nh·∫•t th·ªã tr∆∞·ªùng</p>
                <div class="cta-buttons">
                    <a href="https://app.hyperliquid.xyz/join/VN84" class="btn-primary">ƒêƒÉng k√Ω t√†i kho·∫£n</a>
                    <a href="https://docs.hyperliquid.xyz/" class="btn-secondary">T√¨m hi·ªÉu th√™m</a>
                </div>
                <div class="cta-features">
                    <div class="feature-item">
                        <div class="feature-icon">üí∞</div>
                        <div class="feature-text">
                            <h3>Ph√≠ giao d·ªãch th·∫•p</h3>
                            <p>Ch·ªâ 0.05% cho maker v√† 0.07% cho taker, 97% ph√≠ ƒë∆∞·ª£c d√πng ƒë·ªÉ buy back token</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚ö°</div>
                        <div class="feature-text">
                            <h3>T·ªëc ƒë·ªô nhanh</h3>
                            <p>X√°c nh·∫≠n giao d·ªãch trong v√≤ng 500ms tr√™n Hyperliquid L1</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üìä</div>
                        <div class="feature-text">
                            <h3>Thanh kho·∫£n cao</h3>
                            <p>H∆°n $11B kh·ªëi l∆∞·ª£ng giao d·ªãch h√†ng ng√†y tr√™n s√†n Hyperliquid</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Hyperliquid Vietnam</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        C·ªông ƒë·ªìng Hyperliquid Vietnam - N∆°i k·∫øt n·ªëi c√°c trader DeFi h√†ng ƒë·∫ßu.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link" title="X (Twitter)">ùïè</a>
                        <a href="#" class="social-link" title="YouTube">üì∫</a>
                        <a href="#" class="social-link" title="Facebook">üìò</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>S·∫£n ph·∫©m</h4>
                    <ul>
                        <li><a href="https://app.hyperliquid.xyz/join/VN84" target="_blank">Perpetual Futures</a></li>
                        <li><a href="https://app.hyperliquid.xyz/join/VN84" target="_blank">Spot Trading</a></li>
                        <li><a href="https://app.hyperliquid.xyz/join/VN84" target="_blank">Staking</a></li>
                        <li><a href="https://app.hyperliquid.xyz/join/VN84" target="_blank">Vault</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>C·ªông ƒë·ªìng</h4>
                    <ul>
                        <li><a href="#">Telegram Vi·ªát Nam</a></li>
                        <li><a href="#">Discord Global</a></li>
                        <li><a href="#">X (Twitter)</a></li>
                        <li><a href="#">YouTube Channel</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>T√†i nguy√™n</h4>
                    <ul>
                        <li><a href="https://hyperliquid.gitbook.io/hyperliquid-docs" target="_blank">Documentation</a></li>
                        <li><a href="https://docs.hyperliquid.xyz/developer" target="_blank">API Docs</a></li>
                        <li><a href="blog/index.html">Blog & Tutorials</a></li>
                        <li><a href="index.html#faq">H·ªó tr·ª£</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Hyperliquid Vietnam Community. Kh√¥ng ph·∫£i website ch√≠nh th·ª©c c·ªßa Hyperliquid Labs.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/stats.js"></script>
    <script>
        async function fetchAndRenderComparisonCharts() {
            try {
                const volumeResponse = await fetch('data/volume_data.json');
                const volumeData = await volumeResponse.json();

                const openInterestResponse = await fetch('data/open_interest_data.json');
                const openInterestData = await openInterestResponse.json();

                // Calculate percentage comparisons
                const volumePercentages = calculatePercentageComparisons(volumeData);
                const oiPercentages = calculatePercentageComparisons(openInterestData);

                // Display today's values at the top of each chart
                displayTodayStats(volumeData, 'volume-today', 'Kh·ªëi l∆∞·ª£ng giao d·ªãch');
                displayTodayStats(openInterestData, 'oi-today', 'Open Interest');

                // Render percentage comparison charts
                renderPercentageChart(volumePercentages, 'volumeComparisonChart', 'Hyperliquid vs CEXs');
                renderPercentageChart(oiPercentages, 'openInterestComparisonChart', 'Hyperliquid vs CEXs');

            } catch (error) {
                console.error('Error fetching comparison data:', error);
            }
        }

        function calculatePercentageComparisons(data) {
            const result = {};
            const dates = Object.keys(data).sort(); // Sort dates chronologically
            
            // Create entries for each date
            dates.forEach(date => {
                result[date] = {};
                const hyperliquidValue = data[date]['HYPERLIQUID'] || 0;
                
                // Calculate percentage for each exchange
                for (const exchange of ['BINANCE', 'BYBIT', 'OKX']) {
                    const exchangeValue = data[date][exchange] || 0;
                    if (exchangeValue > 0) {
                        // Calculate Hyperliquid as percentage of this exchange
                        result[date][exchange] = (hyperliquidValue / exchangeValue) * 100;
                    } else {
                        result[date][exchange] = 0;
                    }
                }
            });
            
            return result;
        }

        function displayTodayStats(data, containerId, title) {
            // Get the most recent date
            const dates = Object.keys(data).sort();
            const latestDate = dates[dates.length - 1];
            const latestData = data[latestDate];
            
            // Format the date for display
            const displayDate = formatDate(latestDate);
            
            // Create or get container
            let container = document.getElementById(containerId);
            if (!container) {
                container = document.createElement('div');
                container.id = containerId;
                container.className = 'today-stats';
                
                // Find where to insert it
                const chartId = title.includes('Open Interest') ? 
                    'openInterestComparisonChart' : 'volumeComparisonChart';
                const chartContainer = document.getElementById(chartId).parentNode;
                chartContainer.parentNode.insertBefore(container, chartContainer);
            }
            
            // Hyperliquid value
            const hyperliquidValue = latestData['HYPERLIQUID'] || 0;
            const formattedValue = formatLargeNumber(hyperliquidValue);
            
            // Create HTML content
            let html = `<div class="today-value">${title}: <span>${formattedValue}</span></div>`;
            html += '<div class="today-comparisons">';
            
            // Add comparison percentages with colored dots
            const exchanges = [
                { name: 'BINANCE', color: '#3366FF' },
                { name: 'BYBIT', color: '#FF33A8' },
                { name: 'OKX', color: '#33FF57' }
            ];
            
            exchanges.forEach(exchange => {
                if (latestData[exchange.name]) {
                    const percentage = ((hyperliquidValue / latestData[exchange.name]) * 100).toFixed(1);
                    html += `<div class="today-comparison-item">`;
                    html += `<span class="color-dot" style="background-color: ${exchange.color}"></span>`;
                    html += `<span class="exchange-name">${exchange.name}:</span>`;
                    html += `<span class="percentage-value">${percentage}%</span>`;
                    html += `</div>`;
                }
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }

        function formatLargeNumber(num) {
            if (num >= 1e9) {
                return '$' + (num / 1e9).toFixed(2) + 'B';
            } else if (num >= 1e6) {
                return '$' + (num / 1e6).toFixed(2) + 'M';
            } else if (num >= 1e3) {
                return '$' + (num / 1e3).toFixed(2) + 'K';
            } else {
                return '$' + num.toFixed(2);
            }
        }

        function renderPercentageChart(percentageData, chartId, labelPrefix) {
            const dates = Object.keys(percentageData).sort(); // Sort dates chronologically
            const exchanges = ['BINANCE', 'BYBIT', 'OKX'];
            const colors = {
                'BINANCE': '#3366FF',
                'BYBIT': '#FF33A8',
                'OKX': '#33FF57'
            };
            
            const datasets = [];
            
            // Create datasets for each exchange comparison
            exchanges.forEach(exchange => {
                const values = dates.map(date => percentageData[date][exchange] || 0);
                
                // Get the latest value for the legend label
                const latestValue = values[values.length - 1].toFixed(1);
                
                datasets.push({
                    label: `${exchange}: ${latestValue}%`,
                    data: values,
                    borderColor: colors[exchange],
                    backgroundColor: 'transparent',
                    fill: false,
                    tension: 0.4,
                    borderWidth: 2,
                    pointRadius: 0,
                    pointHoverRadius: 5
                });
            });

            // Add a watermark to the chart
            const watermarkPlugin = {
                id: 'watermark',
                beforeDraw: function(chart) {
                    const ctx = chart.ctx;
                    const width = chart.width;
                    const height = chart.height;
                    
                    ctx.save();
                    ctx.globalAlpha = 0.1;
                    ctx.font = '30px Arial';
                    ctx.fillStyle = '#33FF57';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('HYPEFLOWS', width / 2, height / 2);
                    ctx.restore();
                }
            };

            new Chart(document.getElementById(chartId).getContext('2d'), {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                boxWidth: 10,
                                font: {
                                    weight: 'bold'
                                }
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw.toFixed(1);
                                    return `vs ${context.dataset.label.split(':')[0]}: ${value}%`;
                                },
                                title: function(tooltipItems) {
                                    return formatDate(tooltipItems[0].label);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                maxTicksLimit: 8,
                                maxRotation: 0
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '%'
                            },
                            grid: {
                                color: 'rgba(255,255,255,0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(1) + '%';
                                }
                            }
                        }
                    }
                },
                plugins: [watermarkPlugin]
            });
        }

        // Add some CSS for the stats display
        const style = document.createElement('style');
        style.textContent = `
            .stats-comparisons {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                margin-top: 10px;
            }
            .stats-comparison-item {
                background: rgba(0,0,0,0.05);
                padding: 5px 10px;
                border-radius: 4px;
            }
            .comparison-label {
                font-size: 0.9em;
                margin-right: 5px;
            }
            .comparison-value {
                font-weight: bold;
            }
        `;
        document.head.appendChild(style);

        // Call the function to fetch and render charts when the page loads
        document.addEventListener('DOMContentLoaded', fetchAndRenderComparisonCharts);
    </script>
    <script src="js/animations.js"></script>
</body>
</html>
